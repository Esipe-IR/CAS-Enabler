{% extends 'base.iframe.html.twig' %}

{% block body %}
{% endblock %}

{% block javascripts %}
    <script>
        {% if action == 1 %}
            window.close();
        {% endif %}

        var $chan = Channel.build({
            window: window.opener,
            origin: "*",
            scope: "CAS.Scope"
        });

        $chan.call({
            method: "connect",
            params: "{{ token }}",
            success: function(result) {
                if (result) {
                    window.close();
                }
            }
        });
    </script>
{% endblock %}
